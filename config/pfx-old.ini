# ParadoxFX Raspberry Pi 5 Configuration (HHA)
# ============================================
# Supports: HDMI-0 and HDMI-1
# Copy to pfx.in and customize as needed.
#
# REQUIREMENTS:
# - X11 display system (not Wayland) - use 'sudo raspi-config' to switch
# - PulseAudio (or PipeWire with PulseAudio compatibility, tested with PipeWire 1.2.7)
# - /boot/firmware/config.txt must include:
#     gpu_mem=256
#     hdmi_force_hotplug=1
#     hdmi_drive=2
#     hdmi_group=2
#     hdmi_mode=82
#     consoleblank=0
#     # (add any other HDMI or Pi-specific optimizations as needed)
# - Screen blanking disabled: run scripts/disable-screen-blanking.sh

[mqtt]
broker = 127.0.0.1
port = 1883
client_id = pfx-pi5-hh
keepalive = 60
clean_session = true

base_topic = paradox
device_name = pi5-hh

[global]
log_level = debug
message_level = debug
media_base_path = /opt/paradox/media
heartbeat_enabled = true
heartbeat_interval = 10000
heartbeat_topic = paradox/heartbeat
ducking_volume = 30

# Zone configurations

# zone1 = screen on HDMI0 - COMMENTED OUT FOR BROWSER TESTING
# [screen:zone1-hdmi0]
# type = screen
# topic = paradox/zone1
# media_dir = test
# volume = 80
# player_type = mpv
# audio_device = pulse/alsa_output.platform-107c701400.hdmi.hdmi-stereo
# target_monitor = 0
# default_image = defaults/default.png
# mpv_video_profile = pi5
# Optional screen zone settings:
# name = zone1-hdmi0                # Friendly name (default: section ID)
# enabled = true                    # Enable this zone (default: true)
# media_path =                      # Subdirectory under media_base_path or absolute path
# display = :0                      # X11 or Wayland display identifier
# xinerama_screen = 0               # Xinerama display index
# monitor_geometry = auto           # Resolution override or auto
# player_type = mpv                 # Media player (mpv, cvlc, etc.)
# video_volume = 100                # Video audio volume percent (0–150, default: 100)
# video_queue_max = 1               # Max queued video requests (default: 1)
# background_music_volume = 80      # Default volume for background music (0–150, default: 100)
# ducking_volume = 30               # Volume when ducking for speech/video (0–150, default: 30)
# effects_volume = 100              # Sound effects volume (0–150, default: 100)
# speech_volume = 80                # Speech/narration volume (0–150, default: 100)
# audio_queue_max = 1               # Max queued audio requests for screen audio (default: 1)
# mpv_video_options =               # Extra CLI options for MPV video playback (default: none)
# mpv_audio_options =               # Extra CLI options for MPV audio playback (default: none)

# zone2 = screen on HDMI1 - RE-ENABLED
[screen:zone2-hdmi1]
type = screen
topic = paradox/zone2
media_dir = test
volume = 80
player_type = mpv
audio_device = pulse/alsa_output.platform-107c706400.hdmi.hdmi-stereo
target_monitor = 1
default_image = defaults/default.png
# Use a small queue for zone2 to enforce sequential playback
mpv_video_profile = pi5
# Optional screen zone settings:
# name = zone2-hdmi1                # Friendly name (default: section ID)
# enabled = true                    # Enable this zone (default: true)
# media_path =                      # Subdirectory under media_base_path or absolute path
# display = :0                      # X11 or Wayland display identifier
# xinerama_screen = 0               # Xinerama display index
# monitor_geometry = auto           # Resolution override or auto
# player_type = mpv                 # Media player (mpv, cvlc, etc.)
# video_volume = 100                # Video audio volume percent (0–150, default: 100)
# video_queue_max = 1               # Max queued video requests (default: 1)
# background_music_volume = 80      # Default volume for background music (0–150, default: 100)
# ducking_volume = 30               # Volume when ducking for speech/video (0–150, default: 30)
# effects_volume = 100              # Sound effects volume (0–150, default: 100)
# speech_volume = 80                # Speech/narration volume (0–150, default: 100)
# audio_queue_max = 1               # Max queued audio requests for screen audio (default: 1)
# mpv_video_options =               # Extra CLI options for MPV video playback (default: none)
# mpv_audio_options =               # Extra CLI options for MPV audio playback (default: none)

# zone3 = audio on HDMI0 and HDMI1 (dual output) - COMMENTED OUT FOR BROWSER TESTING
# [audio:zone3-dual-audio]
# type = audio
# topic = paradox/zone3
# media_dir = test
# volume = 80
# player_type = mpv
# audio_device = pulse/combined_hdmi_output
# dual_output_mode = true
# primary_device = pulse/alsa_output.platform-107c701400.hdmi.hdmi-stereo
# secondary_device = pulse/alsa_output.platform-107c706400.hdmi.hdmi-stereo
# enabled = true
# Optional audio zone settings:
# name = zone3-dual-audio           # Friendly name (default: section ID)
# enabled = false                   # Enable this zone (default: true)
# background_music_volume = 80      # Volume for background music (0–150, default: 100)
# ducking_volume = 30               # Ducking level (0–150, default: 30)
# effects_volume = 100              # Effects volume (0–150, default: 100)
# speech_volume = 80                # Speech volume (0–150, default: 100)
# audio_queue_max = 1               # Max queued audio (default: 1)
# mpv_audio_options =               # Extra MPV audio CLI options (default: none)
