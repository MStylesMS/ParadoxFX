# ParadoxFX Raspberry Pi 5 Configuration (H)
# =========================================
# Supports: HDMI-0 only (H = HDMI0 + audio)
# Copy to pfx.ini or use on its own for Pi5 single HDMI
#
# REQUIREMENTS:
# - X11 display system (not Wayland) - use 'sudo raspi-config' to switch
# - ALSA audio configuration
# - Boot config: gpu_mem=256, hdmi optimizations, consoleblank=0
# - Screen blanking disabled: run scripts/disable-screen-blanking.sh
#
# Unified Volume Model (Phase 6):
#   background_volume = base background music level (0-200, default 100)
#   speech_volume     = base speech / narration level (0-200, default 100)
#   effects_volume    = base sound effects level (0-200, default 100)
#   video_volume      = base video audio track level (0-200, default 100)
#   ducking_adjust    = negative reduction applied to background when ducked (e.g. -40)
#   max_volume        = upper clamp for any resolved effective volume (default 150)
# Legacy keys removed: volume, background_music_volume, ducking_volume, speech_ducking, video_ducking

[mqtt]
broker = localhost
port = 1883
client_id = pfx-pi5-hh
keepalive = 60
clean_session = true

base_topic = paradox
device_name = pi5-hh

[global]
log_level = debug
message_level = debug
media_base_path = /opt/paradox/media
heartbeat_enabled = true
heartbeat_interval = 10000
heartbeat_topic = paradox/heartbeat
# Unified ducking (legacy ducking_volume removed)
ducking_adjust = -40
max_volume = 150

# Zone configurations
# zone1 = audio on HDMI0
[audio:zone1-hdmi0]
type = audio
topic = paradox/zone1
media_dir = test
player_type = mpv
audio_device = pulse/alsa_output.platform-107c701400.hdmi.hdmi-stereo
# Per-type base volumes
background_volume = 80
speech_volume = 80
effects_volume = 100
video_volume = 100
# Optional audio zone settings:
# name = zone1-hdmi0               # Friendly name (default: section ID)
# enabled = true                    # Enable this zone (default: true)
# audio_queue_max = 1               # Max queued audio (default: 1)
# mpv_audio_options =               # Extra MPV audio CLI options (default: none)

# zone2 = screen on HDMI1 - RE-ENABLED
[screen:zone2-hdmi1]
type = screen
topic = paradox/zone2
media_dir = test
player_type = mpv
audio_device = pulse/alsa_output.platform-107c706400.hdmi.hdmi-stereo
target_monitor = 1
default_image = defaults/default.png
mpv_video_profile = pi5
# Per-type base volumes
background_volume = 80
speech_volume = 80
effects_volume = 100
video_volume = 100
# Optional screen zone settings:
# name = zone2-hdmi1                # Friendly name for this zone
# enabled = true                    # Disable this zone when set to false
# media_path =                      # Subdirectory under media_base_path or absolute path
# display = :0                      # X11 or Wayland display identifier
# xinerama_screen = 0               # Xinerama display index
# monitor_geometry = auto           # Resolution override or auto
# player_type = mpv                 # Media player (mpv, cvlc, etc.)
# video_queue_max = 1               # Max queued video requests
# audio_queue_max = 1               # Max queued audio requests for screen audio
# mpv_video_options =               # Extra CLI options for MPV video playback
# mpv_audio_options =               # Extra CLI options for MPV audio playback

# zone3 = audio on HDMI0 and HDMI1 (dual output) - TEMPORARILY DISABLED
[audio:zone3-dual-audio]
type = audio
topic = paradox/zone3
media_dir = test
player_type = mpv
audio_device = pulse/combined_hdmi_output
dual_output_mode = true
primary_device = pulse/alsa_output.platform-107c701400.hdmi.hdmi-stereo
secondary_device = pulse/alsa_output.platform-107c706400.hdmi.hdmi-stereo
background_volume = 80
speech_volume = 80
effects_volume = 100
video_volume = 100
# Optional audio zone settings:
# name = zone3-dual-audio           # Friendly name for this zone
# enabled = false                   # Disable this zone when set to false
# audio_queue_max = 1               # Max queued audio requests
# mpv_audio_options =               # Extra CLI options for MPV audio playback
