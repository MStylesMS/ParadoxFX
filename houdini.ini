# ParadoxFX Raspberry Pi 4 Configuration (HHA)
# ============================================
# Supports: HDMI-0, HDMI-1, Headphones audio (HHA = 2 HDMI + Headphone + Audio)
# Copy to pfx.ini or use on its own for full Pi4 setup with analog and both HDMI outputs
#
# REQUIREMENTS:
# - X11 display system (not Wayland) - use 'sudo raspi-config' to switch
# - PulseAudio (or PipeWire with PulseAudio compatibility)
# - /boot/firmware/config.txt must include:
#     gpu_mem=256
#     hdmi_force_hotplug=1
#     hdmi_drive=2
#     hdmi_group=2
#     hdmi_mode=82
#     consoleblank=0
# - Screen blanking disabled: run scripts/disable-screen-blanking.sh

[mqtt]
broker = 127.0.0.1
port = 1883
# username =           # Not required for unsecured brokers
# password =           # Not required for unsecured brokers
client_id = pfx-pi4-hha
keepalive = 60
clean_session = true

base_topic = paradox
device_name = houdini

[global]
log_level = debug  #info
media_base_path = /opt/paradox/media/game
heartbeat_enabled = true
heartbeat_interval = 10000
heartbeat_topic = paradox/heartbeat
ducking_volume = 30

# Dual HDMI screen zones with Pi4 optimizations
[screen:mirror-hdmi0]
type = screen
topic = paradox/houdini/mirror
media_dir = 
volume = 80
player_type = mpv
audio_device = pulse/alsa_output.platform-fef00700.hdmi.hdmi-stereo
display = :0
target_monitor = 0
default_image = default.png
mpv_video_profile = pi4-drm

[screen:picture-hdmi1]
type = screen
topic = paradox/houdini/picture
media_dir = 
volume = 80
player_type = mpv
audio_device = pulse/alsa_output.platform-fef05700.hdmi.hdmi-stereo
# Optional: to send zone2 audio to the analog headphone output instead, uncomment:
# audio_device = pulse/alsa_output.platform-fe00b840.mailbox.stereo-fallback
display = :1
target_monitor = 1
default_image = default.png
mpv_video_profile = pi4-drm

# Headphone audio zone
[audio:analog]
type = audio
topic = paradox/houdini/audio
media_dir = 
volume = 80
audio_device = pulse/alsa_output.platform-fe00b840.mailbox.stereo-fallback

#[audio:zone3-combined]
#type = audio
#topic = paradox/houdini/zone3
#media_dir = 
#volume = 80
#audio_device = pulse/combined_hdmi_output
#
#NOTE: To use this, PFX must be updated to create it.  
#      See docs/COMBINED_AUDIO.md for details.

# Quick MPV test commands (commented):
#
# Play test audio to mirror (primary HDMI / HDMI0):
# DISPLAY=:0 mpv --no-video --audio-device="pulse/alsa_output.platform-fef00700.hdmi.hdmi-stereo" --length=3 /opt/paradox/media/test/fx/Lasergun.mp3
# Play test audio to picture (secondary HDMI / HDMI1):
# DISPLAY=:1 mpv --no-video --audio-device="pulse/alsa_output.platform-fef05700.hdmi.hdmi-stereo" --length=3 /opt/paradox/media/test/fx/Lasergun.mp3
# Play test audio to analog headphone output:
# mpv --no-video --audio-device="pulse/alsa_output.platform-fe00b840.mailbox.stereo-fallback" --length=3 /opt/paradox/media/test/fx/Lasergun.mp3

